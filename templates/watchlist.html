<!DOCTYPE html>
<html>
<head>
    <title>Netflix Clone - My List</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h2>NETFLIX</h2>
        <nav>
            <a href="/home">HOME</a>
            <a href="/search">BROWSE</a>
            <a href="/watchlist" style="border-bottom: 2px solid #e50914;">MY LIST</a>
            <a href="/profile">PROFILE</a>
            <button class="logout-btn" onclick="window.location.href='/logout'">LOGOUT</button>
        </nav>
    </header>

    <div style="padding: 50px;">
        <h1 style="font-size: 2.5em; margin-bottom: 30px;">MY LIST</h1>
        
        {% if movies %}
        <div class="category">
            <div class="movies">
                {% for m in movies %}
                <div class="card">
                    <a href="/movie/{{m[0]}}" style="text-decoration:none;color:inherit;display:block;height:100%;">
                        <img src="{{m[6]}}" alt="{{m[1]}}">
                        <div class="card-info">
                            <h3>{{m[1]}} {{m[13]}}</h3>
                            <div class="card-rating">‚≠ê {{m[5]}}/10 | {{m[7]}}min</div>
                            <div class="card-genre">{{m[4]}}</div>
                            <button onclick="removeMovie({{m[0]}}, event)" style="margin-top: 10px; padding: 8px 15px; background: #e50914; color: white; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold;">REMOVE</button>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="text-align: center; padding: 100px 20px; background: rgba(229, 9, 20, 0.05); border-radius: 8px; border: 2px dashed #e50914;">
            <h2 style="font-size: 2em; margin-bottom: 20px;">Your list is empty</h2>
            <p style="color: #b3b3b3; margin-bottom: 30px; font-size: 1.1em;">Start building your watchlist by adding movies from our catalog.</p>
            <a href="/home" class="btn" style="display: inline-block; padding: 12px 30px; background: #e50914; color: white; text-decoration: none; border-radius: 4px; font-weight: bold;">BROWSE NOW</a>
        </div>
        {% endif %}
    </div>

    <script>
        function removeMovie(movieId, event) {
            event.preventDefault();
            if(confirm('Remove from watchlist?')) {
                fetch(`/api/watchlist/remove/${movieId}`, {method: 'POST'})
                    .then(r => r.json())
                    .then(data => {
                        location.reload();
                    });
            }
        }
    </script>
</body>
</html>
